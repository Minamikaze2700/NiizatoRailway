<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>五路線対応 時刻表</title>
<style>
  body{font-family:"Hiragino Kaku Gothic ProN",sans-serif;background:#f7fbfd;margin:16px;}
  .controls{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px;}
  select,button{padding:8px 10px;border-radius:8px;border:1px solid #ddd;background:#fff;}
  .timetable{background:#fff;border-radius:12px;padding:12px;box-shadow:0 6px 24px rgba(0,0,0,0.06);}
  .hour-row{display:flex;align-items:flex-start;padding:8px 6px;border-bottom:1px dashed #eee;}
  .hour-col{width:56px;font-weight:700;font-size:18px;color:#666;text-align:center;padding-top:6px}
  .services{display:flex;gap:8px;flex-wrap:wrap;flex:1}
  .service{min-width:88px;border-radius:8px;padding:6px 8px;background:#fdfdfd;box-shadow:0 1px 4px rgba(0,0,0,0.05);display:flex;flex-direction:column;align-items:center}
  .stype{font-size:12px;color:#444;margin-bottom:6px;}
  .minute{font-size:22px;font-weight:800;line-height:1;color:#1ea7d7;}
  .dest{font-size:12px;color:#222;margin-top:6px;text-align:center;}
  .small{font-size:12px;color:#777}
</style>
</head>
<body>
<h2>五路線対応 時刻表（新里地方）</h2>
<div class="controls">
  <label>路線：
    <select id="routeSelect"></select>
  </label>
  <label>駅：
    <select id="stationSelect"></select>
  </label>
  <label>方面：
    <select id="directionSelect"></select>
  </label>
  <label>平日/土休日：
    <select id="dayType">
      <option value="auto">自動</option>
      <option value="weekday">平日</option>
      <option value="holiday">土休日</option>
    </select>
  </label>
  <button id="regen">更新</button>
</div>
<div class="timetable" id="timetableRoot"></div>

<script>
// 五路線データ（駅名は wiki 記載の代表駅のみダミー配置。実際の全駅名は atwiki ページから差し替え可）
const lines = {
  "湯の浜線": ["豊町","新里","鶴宮","北鶴宮"],
  "新里線": ["新里","彩山","田ノ原","中野原"],
  "鶴宮線": ["鶴宮","北鶴宮","彩山"],
  "彩山線": ["彩山","田ノ原"],
  "田ノ原線": ["田ノ原","中野原"]
};
const types = ["各停","準急","区準","急行","区急","快速","区快"];
const minutes = ["03","13","23","33","43","53"];

const routeSelect = document.getElementById("routeSelect");
const stationSelect = document.getElementById("stationSelect");
const directionSelect = document.getElementById("directionSelect");
const dayTypeSelect = document.getElementById("dayType");
const timetableRoot = document.getElementById("timetableRoot");

function initRoutes(){
  for(const line in lines){
    const opt=document.createElement("option");
    opt.value=line;
    opt.textContent=line;
    routeSelect.appendChild(opt);
  }
  routeSelect.value="湯の浜線"; // デフォルト
  updateStations();
}
function updateStations(){
  stationSelect.innerHTML="";
  const stations=lines[routeSelect.value];
  stations.forEach(st=>{
    const o=document.createElement("option");
    o.value=st; o.textContent=st;
    stationSelect.appendChild(o);
  });
  stationSelect.value="新里"; // デフォルト
  updateDirections();
}
function updateDirections(){
  directionSelect.innerHTML="";
  const stations=lines[routeSelect.value];
  stations.filter(s=>s!==stationSelect.value).forEach(st=>{
    const o=document.createElement("option");
    o.value=st; o.textContent=st+"方面";
    directionSelect.appendChild(o);
  });
  if(stations.includes("北鶴宮")) directionSelect.value="北鶴宮";
}
function renderTimetable(){
  timetableRoot.innerHTML="";
  const start=5,end=23;
  for(let h=start;h<=end;h++){
    const row=document.createElement("div");
    row.className="hour-row";
    const hc=document.createElement("div");
    hc.className="hour-col"; hc.textContent=h+"時";
    row.appendChild(hc);
    const svcs=document.createElement("div"); svcs.className="services";
    minutes.forEach((m,i)=>{
      const svc=document.createElement("div"); svc.className="service";
      const st=document.createElement("div"); st.className="stype";
      st.textContent=types[(h+i)%types.length];
      const mn=document.createElement("div"); mn.className="minute"; mn.textContent=m;
      const ds=document.createElement("div"); ds.className="dest"; ds.textContent=directionSelect.value;
      svc.append(st,mn,ds); svcs.appendChild(svc);
    });
    row.appendChild(svcs);
    timetableRoot.appendChild(row);
  }
}
routeSelect.addEventListener("change",updateStations);
stationSelect.addEventListener("change",updateDirections);
document.getElementById("regen").addEventListener("click",renderTimetable);

initRoutes();
renderTimetable();
</script>
</body>
</html>
